# Assignment2
 刘瑞涵 221040051
 
# 代码简介
 get_factors.py: 从聚宽获得因子数据，并写入本地。
 data_preprocess.py: 通过自建函数对因子数据进行去极值、行业市值中性化、标准化，因子数据写入到本地。（运行时间较长）
 
 train_test_set.py: 将数据划分为train set与test set，并将收益率情况贴上标签，结果写入本地。
 
 feature_selection.py: 分别对XGBoost与RandomForest选择因子保留百分比。
 
 params_selection.py: 首先对两个模型进行训练，训练结果写入result文件夹中；然后选用最优参数测试模型得分效果；最后展示模型得出的因子重要性。
 
# 研究简介
 参考：https://www.joinquant.com/view/community/detail/a8f0764b797e8545754e01a5e01eb8fd
《基于随机森林和XGBoost的多因子模型分析》。研究主要复现了机器学习模型在因子选择上的效果。

# 研究流程
1. 首先从聚宽上获取沪深300股票因子数据，并进行去极值、行业市值中性化、标准化操作，并剔除每期ST股票以及上市时间小于90天的股票。（过程中发现原文数据提取可能存在问题，原文并没有再每一期提取相应时期的沪深300成分股，而是使用了研究时间段第一期的数据，因此我进行了更正。）
2. 在每一期将股票池的收益率进行排序，取收益率前30%与后30%的股票保留并标注1与-1,（原文中使用了前30%与后30%股票的平均收益率作为划分，显然这是有错误的，因此我将平均更正为了中位数。）
3. 上述流程中我得到了23个因子（直接选用了原文所使用的因子，目的是为了复现一下研究所以还没有深入探讨因子的初选问题），使用方差分析法选择模型使用的因子数百分比。（实际上我认为这一步在此研究中可以省略，一是由于因子数量并不多，二是我认为模型自己会筛选有效因子，在训练中使用所有的因子我认为能保留更多有效信息。）
4. 在训练集上使用cv法对模型进行参数训练，然后选用最优参数在测试集上进行测试，并查看模型得出的因子重要性排序。
（研究过程一部分可见word文档，与该简介互补）
